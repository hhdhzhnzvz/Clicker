<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Cosmic Defender</title>
    <style>
        :root {
            --primary: #00f7ff;
            --secondary: #ff006a;
            --background: #0a0a2e;
            --accent: #45ffb9;
        }

        body {
            margin: 0;
            background: var(--background);
            color: var(--primary);
            font-family: 'Orbitron', sans-serif;
            min-height: 100vh;
            overflow: hidden;
        }

        .game-container {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 30px;
            padding: 20px;
            height: 100vh;
            box-sizing: border-box;
        }

        .game-field {
            position: relative;
            border: 3px solid var(--primary);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 0 40px rgba(0, 247, 255, 0.1);
        }

        #planet {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            width: 250px;
            height: 250px;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, 
                #00ff88 0%, #009944 20%, 
                #005522 40%, #002211 60%);
            box-shadow: 0 0 80px rgba(0, 255, 136, 0.3),
                        inset 0 0 50px rgba(0, 255, 187, 0.4);
            cursor: pointer;
            transition: transform 0.1s;
            z-index: 2;
        }

        .enemy {
            position: absolute;
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background: var(--secondary);
            box-shadow: 0 0 15px var(--secondary);
            animation: pulse 1s infinite;
            cursor: pointer;
            z-index: 1;
        }

        .stats-panel {
            background: linear-gradient(145deg, #0a0a3e, #0a0a2e);
            border: 2px solid var(--primary);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 0 20px rgba(0, 247, 255, 0.1);
            margin-bottom: 20px;
        }

        .upgrades-panel {
            background: linear-gradient(145deg, #0a0a3e, #0a0a2e);
            border: 2px solid var(--primary);
            border-radius: 12px;
            padding: 20px;
            height: calc(100% - 160px);
            overflow-y: auto;
        }

        .upgrade-card {
            background: rgba(0, 20, 40, 0.8);
            border: 1px solid var(--primary);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .upgrade-card:hover {
            border-color: var(--accent);
            transform: translateY(-3px);
        }

        .upgrade-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .upgrade-title {
            font-size: 1.1em;
            color: var(--accent);
        }

        .upgrade-cost {
            background: var(--secondary);
            padding: 5px 10px;
            border-radius: 5px;
            font-weight: bold;
        }

        .upgrade-level {
            font-size: 0.9em;
            color: #ffffff80;
        }

        .star {
            position: absolute;
            width: 2px;
            height: 2px;
            background: white;
            border-radius: 50%;
            animation: twinkle 2s infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="game-container">
        <div class="game-field" id="gameField">
            <div id="planet"></div>
        </div>
        
        <div class="game-ui">
            <div class="stats-panel">
                <div class="stat-item">
                    <span>üí∞ –ö—Ä–µ–¥–∏—Ç—ã:</span>
                    <span id="credits">0</span>
                </div>
                <div class="stat-item">
                    <span>‚ö° –°–∏–ª–∞:</span>
                    <span id="power">1</span>
                </div>
                <div class="stat-item">
                    <span>‚ù§Ô∏è –ó–¥–æ—Ä–æ–≤—å–µ:</span>
                    <span id="health">100</span>%
                </div>
                <div class="stat-item">
                    <span>üåå –í–æ–ª–Ω–∞:</span>
                    <span id="wave">1</span>
                </div>
            </div>

            <div class="upgrades-panel">
                <div class="upgrade-card" data-upgrade="damage">
                    <div class="upgrade-header">
                        <div class="upgrade-title">üí• –£—Ä–æ–Ω</div>
                        <div class="upgrade-cost" id="damageCost">50</div>
                    </div>
                    <div class="upgrade-level">–£—Ä–æ–≤–µ–Ω—å: <span>1</span></div>
                </div>

                <div class="upgrade-card" data-upgrade="turret">
                    <div class="upgrade-header">
                        <div class="upgrade-title">üõ∏ –¢—É—Ä–µ–ª–∏</div>
                        <div class="upgrade-cost" id="turretCost">150</div>
                    </div>
                    <div class="upgrade-level">–£—Ä–æ–≤–µ–Ω—å: <span>0</span></div>
                </div>

                <div class="upgrade-card" data-upgrade="shield">
                    <div class="upgrade-header">
                        <div class="upgrade-title">üõ°Ô∏è –©–∏—Ç—ã</div>
                        <div class="upgrade-cost" id="shieldCost">30</div>
                    </div>
                    <div class="upgrade-level">–£—Ä–æ–≤–µ–Ω—å: <span>1</span></div>
                </div>

                <div class="upgrade-card" data-upgrade="heal">
                    <div class="upgrade-header">
                        <div class="upgrade-title">‚öóÔ∏è –õ–µ—á–µ–Ω–∏–µ</div>
                        <div class="upgrade-cost" id="healCost">75</div>
                    </div>
                    <div class="upgrade-level">–£—Ä–æ–≤–µ–Ω—å: <span>0</span></div>
                </div>

                <div class="upgrade-card" data-upgrade="income">
                    <div class="upgrade-header">
                        <div class="upgrade-title">üí∞ –î–æ—Ö–æ–¥</div>
                        <div class="upgrade-cost" id="incomeCost">100</div>
                    </div>
                    <div class="upgrade-level">–£—Ä–æ–≤–µ–Ω—å: <span>0</span></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        class Game {
            constructor() {
                this.credits = 0;
                this.power = 1;
                this.health = 100;
                this.wave = 1;
                this.upgrades = {
                    damage: { level: 1, baseCost: 50, cost: 50, mult: 1.3 },
                    turret: { level: 0, baseCost: 150, cost: 150, mult: 1.4 },
                    shield: { level: 1, baseCost: 30, cost: 30, mult: 1.25 },
                    heal: { level: 0, baseCost: 75, cost: 75, mult: 1.35 },
                    income: { level: 0, baseCost: 100, cost: 100, mult: 1.5 }
                };
                this.autoHeal = 0;
                this.autoIncome = 0;
                this.generateStars();
                this.setupEventListeners();
                this.startWave();
                this.gameLoop();
            }

            generateStars() {
                const container = document.getElementById('gameField');
                for(let i = 0; i < 200; i++) {
                    const star = document.createElement('div');
                    star.className = 'star';
                    star.style.left = `${Math.random() * 100}%`;
                    star.style.top = `${Math.random() * 100}%`;
                    star.style.animationDelay = `${Math.random() * 2}s`;
                    container.appendChild(star);
                }
            }

            setupEventListeners() {
                document.getElementById('planet').addEventListener('click', () => {
                    this.credits += this.power;
                    this.updateUI();
                });

                document.querySelectorAll('.upgrade-card').forEach(card => {
                    card.addEventListener('click', (e) => {
                        this.buyUpgrade(card.dataset.upgrade);
                    });
                });
            }

            spawnEnemy() {
                const enemy = document.createElement('div');
                enemy.className = 'enemy';
                const planetRect = document.getElementById('planet').getBoundingClientRect();
                const targetX = planetRect.left + planetRect.width/2;
                const targetY = planetRect.top + planetRect.height/2;

                const angle = Math.random() * Math.PI * 2;
                const spawnDistance = 1000;
                const startX = targetX + Math.cos(angle) * spawnDistance;
                const startY = targetY + Math.sin(angle) * spawnDistance;

                enemy.style.left = `${startX}px`;
                enemy.style.top = `${startY}px`;
                document.getElementById('gameField').appendChild(enemy);

                const dx = targetX - startX;
                const dy = targetY - startY;
                const distance = Math.sqrt(dx*dx + dy*dy);
                const speed = 1;

                const move = () => {
                    const currentX = parseFloat(enemy.style.left);
                    const currentY = parseFloat(enemy.style.top);
                    const newX = currentX + (dx/distance) * speed;
                    const newY = currentY + (dy/distance) * speed;

                    enemy.style.left = `${newX}px`;
                    enemy.style.top = `${newY}px`;

                    if(Math.abs(newX - targetX) > 10 || Math.abs(newY - targetY) > 10) {
                        requestAnimationFrame(move);
                    } else {
                        this.health -= 2 + this.wave * 0.5;
                        enemy.remove();
                        this.updateUI();
                    }
                };
                requestAnimationFrame(move);

                enemy.addEventListener('click', (e) => {
                    e.stopPropagation();
                    this.credits += 1 + this.upgrades.turret.level;
                    enemy.remove();
                    this.updateUI();
                });
            }

            buyUpgrade(type) {
                const upgrade = this.upgrades[type];
                if(this.credits >= upgrade.cost) {
                    this.credits -= upgrade.cost;
                    upgrade.level++;
                    upgrade.cost = Math.round(upgrade.baseCost * Math.pow(upgrade.mult, upgrade.level));
                    
                    switch(type) {
                        case 'damage':
                            this.power += 1;
                            break;
                        case 'turret':
                            this.startTurret();
                            break;
                        case 'shield':
                            this.health = Math.min(100, this.health + 25);
                            break;
                        case 'heal':
                            this.autoHeal += 0.2;
                            break;
                        case 'income':
                            this.autoIncome += 1;
                            break;
                    }
                    this.updateUI(true);
                }
            }

            startTurret() {
                setInterval(() => {
                    document.querySelectorAll('.enemy').forEach(enemy => {
                        if(Math.random() < 0.1 * this.upgrades.turret.level) {
                            enemy.remove();
                            this.credits += 1;
                            this.updateUI();
                        }
                    });
                }, 1000);
            }

            startWave() {
                const enemiesCount = 5 + this.wave * 2;
                for(let i = 0; i < enemiesCount; i++) {
                    setTimeout(() => this.spawnEnemy(), i * 500);
                }
            }

            updateUI(updateUpgrades = false) {
                document.getElementById('credits').textContent = Math.floor(this.credits);
                document.getElementById('power').textContent = this.power;
                document.getElementById('health').textContent = Math.min(100, Math.floor(this.health));
                document.getElementById('wave').textContent = this.wave;

                if(updateUpgrades) {
                    for(const type in this.upgrades) {
                        const upgrade = this.upgrades[type];
                        const card = document.querySelector(`[data-upgrade="${type}"]`);
                        card.querySelector('.upgrade-cost').textContent = Math.round(upgrade.cost);
                        card.querySelector('.upgrade-level span').textContent = upgrade.level;
                    }
                }

                if(this.health <= 0) {
                    alert(`Game Over! –î–æ—Å—Ç–∏–≥–Ω—É—Ç–∞ –≤–æ–ª–Ω–∞: ${this.wave}`);
                    location.reload();
                }
            }

            gameLoop() {
                setInterval(() => {
                    this.health = Math.min(100, this.health + this.autoHeal);
                    this.credits += this.autoIncome;
                    this.updateUI();
                    
                    if(document.querySelectorAll('.enemy').length === 0) {
                        this.wave++;
                        this.startWave();
                    }
                }, 1000);
            }
        }

        new Game();
    </script>
</body>
</html>